<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Karla:wght@400;700&display=swap">
    <link href="./src/output.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
     <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
    
    <link rel="stylesheet" href="estilo.css" />
    <title>Agrícola del Norte</title>
</head>
<style>
   
</style>
<body>  
        <section class="contact">
            <div class="border-b border-gray-400 mb-6"></div>
            <h1 class="block mt-8 text-center text-green-600 font-bold lg:text-4xl max-md:text-2xl sm:text-3xl "  id="contacto">CONTACTO</h1>
            <div class="contenedor">
            <div class="contacto">
            <form>
            <label class="block mb-2 text-black ">Nombre <span class="text-blue-700 ml-1">*</span>
            </label>
            <input id="nombre" type="text " class="nombre mb-2 rounded border border-gray-400 border-solid border-3 block bg-white">
            <p id="pf1" class="text-left mb-4  mt-2 text-Red hidden">Este campo es requerido</p>
            <label class="block mb-2 text-black ">Teléfono <span class="text-blue-700 ml-1">*</span>
            </label>
            <input id="telefono" type="text" class="telefono mb-2 rounded border border-gray-400 border-solid border-3 block bg-white">
            <p id="pf2" class="text-left mb-4  mt-2 text-Red hidden">Este campo es requerido</p>
            <label class="block mb-2 text-black max-md:w-full ">E-mail <span class="text-blue-700 ml-1">*</span>
            </label>
            <input id="correo" type="text" class="correo mb-2 rounded border border-gray-400 border-solid border-3 block bg-white">
            <p id="pf3" class="text-left mb-4  text-Red hidden">Por favor ingresar una dirección de correo válido</p>
            <p id="pf4" class="text-left mb-4  mt-2 text-Red hidden">Este campo es requerido</p>
            <label class="block mb-2 text-black ">Asunto <span class="text-blue-700 ml-1">*</span>
            </label>
            <input id="asunto" type="text" class="asunto mb-2 rounded border border-gray-400 border-solid border-3 block bg-white">
            <p id="pf5" class="text-left mb-4  mt-2 text-Red hidden">Este campo es requerido</p>
            <label class="block mb-2 text-black ">Mensaje <span class="text-blue-700 ml-1">*</span>
            </label>
            <textarea id="msj" class="msj mb-2 rounded border border-gray-400 border-solid border-3 block bg-white"></textarea>
            <p id="pf6" class="text-left mb-4  mt-2 text-Red hidden">Este campo es requerido</p>
            <input id="submit" type="button" value="Enviar" class="botonform"/>
            </form>
            </div>
            <div id="map" class="mapa"></div>
        </div>
        </section>
</div>
<script>
    const map = L.map('map').setView([-18.50019,-70.28407], 17);
    
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: ' <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);
    
    let nombre = document.getElementById('nombre');
    let telefono = document.getElementById('telefono');
    let correo = document.getElementById('correo');
    let asunto = document.getElementById('asunto');
    let mensaje = document.getElementById('msj');
    let submit = document.getElementById('submit');
    let p1 = document.getElementById('pf1');
    let p2 = document.getElementById('pf2');
    let p3 = document.getElementById('pf3');
    let p4 = document.getElementById('pf4');
    let p5 = document.getElementById('pf5');
    let p6 = document.getElementById('pf6');
    
    const email = correo.value.trim(); 
    
    function isValidEmail(email) {
    
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email); 
    }
    
    function showErrorText() {
    
    p3.style.display = 'block';
    }
    
    function hideErrorText() {
    
    p3.style.display = 'none'; 
    }
    
    correo.addEventListener('blur', () => {
    const emailValue = correo.value.trim();
    
    if (!isValidEmail(emailValue)) {
        showErrorText(); 
    } else {
        hideErrorText(); 
    }
    if (emailValue === '') {
        p4.style.display = 'block';
    } else {
        p4.style.display = 'none';
    }
    });
    
    submit.addEventListener('click',(e)=>{
    e.preventDefault();
    
    const emailValue = correo.value.trim();
    
    // Validación de campos aquí...
    if(nombre.value.trim()==='' ){
    p1.style.display='block';
    }
    else{
    p1.style.display='none';
    }
    if(telefono.value.trim()==='' ){
    p2.style.display='block';
    }
    else{
    p2.style.display='none';
    }
    
    if(emailValue ==='' ){
    p4.style.display='block';
    }
    else{
    p4.style.display='none';
    }
    if(asunto.value.trim()==='' ){
    p5.style.display='block';
    }
    else{
    p5.style.display='none';
    }
    
    if(mensaje.value.trim()==='' ){
    p6.style.display='block';
    }
    else{
    p6.style.display='none';
    }
    // Verificar si todos los campos obligatorios están completos y el correo es válido
    if (nombre.value.trim() !== '' &&
    telefono.value.trim() !== '' &&
    emailValue !== '' &&
    isValidEmail(emailValue) &&
    asunto.value.trim() !== '' &&
    mensaje.value.trim() !== '') {
    alert("Mensaje enviado!\nGracias por completar el formulario. ¡Nos pondremos en contacto pronto!");
    }
    
    })
    
    nombre.addEventListener('blur', ()=>{
    if(nombre.value.trim()===''){
        p1.style.display='block';
    }else{
        p1.style.display='none';
    }
    
    })
    
    telefono.addEventListener('blur', ()=>{
    if(telefono.value.trim()===''){
    p2.style.display='block';
    }else{
        p2.style.display='none';
    }
    })
    
    correo.addEventListener('blur', ()=>{
    
    if(correo.value.trim()===''){
    p4.style.display='block';
    }else{
        p4.style.display='none';
    }
    })
    
    asunto.addEventListener('blur', ()=>{
    if(asunto.value.trim()===''){
    p5.style.display='block';
    }else{
        p5.style.display='none';
    }
    })
    
    mensaje.addEventListener('blur', ()=>{
    if(mensaje.value.trim()===''){
    p6.style.display='block';
    }else{
        p6.style.display='none';
    }
    })
         </script>
</body>
</html>